# 0103_mode_change

起動時、SVCモードまたはHYPモードになっているので、これをシステムモードに変更します。

CPUモードはCPSRレジスタの下位5bitで以下の通りに表します。  
・FIQモード(0x11) FIQ割り込み時に移行します。  
・IRQモード(0x12) IRQ割り込み時に移行します。  
・SVCモード(0x13) リセット時、SVC命令時に移行します。  
・アボートモード(0x17) プリフェッチアボート、データアボート時に移行します。  
・未定義モード(0x1B) 未定義命令実行時に移行します。  
・HYPモード(0x1A) 仮想化拡張モード(RaspberryPi2以降)  
・ユーザモード(0x10) アプリケーションを実行するモード(非特権モード)  
・システムモード(0x1F) アプリケーションを実行するモード(特権モード)  

HYPは簡単には移行できないので、別ものとして考える。

手順)  
・HYPモードをチェックする  
・HYPモードの場合のみ  
　変更先モードと戻り先アドレスを設定し、eret命令でモード移行  
・システムモードに変更する
